---
interface Props {
  showDarkToggle?: boolean;
}

const { showDarkToggle = true } = Astro.props;
---

<nav class="navbar">
  <a href="/dashboard" class="navbar-brand">
    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
      <rect width="32" height="32" rx="8" fill="#F6821F" />
      <text
        x="16"
        y="21"
        text-anchor="middle"
        fill="white"
        font-size="14"
        font-weight="bold"
        font-family="Inter, sans-serif"
      >
        CF
      </text>
    </svg>
    CF Architect
  </a>
  <div class="navbar-actions">
    {
      showDarkToggle && (
        <button class="dark-toggle" id="dark-toggle" title="Toggle dark mode">
          ☀
        </button>
      )
    }
  </div>
</nav>

<script>
  const toggle = document.getElementById("dark-toggle");
  if (toggle) {
    const update = () => {
      toggle.textContent = document.documentElement.classList.contains("dark")
        ? "☀"
        : "☾";
    };
    update();
    toggle.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark");
      const isDark = document.documentElement.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
      update();
    });
  }
</script>
